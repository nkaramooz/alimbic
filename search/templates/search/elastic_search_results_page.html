{% load app_filters %}

<h1> Elastic search results </h1>
<h1> Search </h1>
<form action="{% url 'search:elastic_search' %}" method="post"> 
{% csrf_token %}
	<input type="text" name="query">
	<input type="submit" value="submit">
</form>
<br>
<h3>Query: <i>{{query}}</i></h3>


{% for hit in sr %}
	
	{% with abstract=hit|get:"_source"%}
	<h2>{{abstract|get:"article_title"}} </h2>
	<h4>{{abstract|get:"article_abstract"}}</h4>
	<h4>{{abstract|get:"article_type"}}</h4>
	<h5>{{abstract|get:"journal_pub_year"}}</h5>
	<h5><a href="https://www.ncbi.nlm.nih.gov/pubmed/{{abstract|get:"pmid"}}">PMID: {{abstract|get:"pmid"}}</a></h5>
	{%  endwith %}
	<h5>{{hit|get:"_score"}}</h5>
	<br>

{% endfor %}